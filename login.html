<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - FakeTwitter</title>
    <!-- 1. Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class', // Enable class-based dark mode
            theme: {
                extend: {
                    colors: {
                        'twitter-blue': '#1DA1F2',
                    }
                }
            }
        }
    </script>
    <!-- 2. Load Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <!-- 
      ===== NEW: LocalStorage Dark Mode Check =====
      This script MUST be in the <head> to run BEFORE the page renders.
      This prevents the "flash" of the wrong theme.
    -->
    <script>
        // Check 1: Is a theme saved in localStorage?
        if (localStorage.theme === 'dark' || 
            // Check 2: If no theme is saved, does the user's OS prefer dark?
            (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            // If yes to either, add 'dark' to the <html> tag
            document.documentElement.classList.add('dark');
        } else {
            // Otherwise, remove it (for safety)
            document.documentElement.classList.remove('dark');
        }
    </script>
</head>
<body class="bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-100 min-h-screen flex flex-col">

    <!-- Header with Dark Mode Toggle -->
    <header class="w-full max-w-lg mx-auto p-4 flex justify-between items-center">
        <!-- Twitter Logo -->
        <svg viewBox="0 0 24 24" aria-hidden="true" class="w-7 h-7 text-twitter-blue fill-current">
            <g><path d="M23.643 4.937c-.835.37-1.732.62-2.675.733.962-.576 1.7-1.49 2.048-2.578-.9.534-1.897.922-2.958 1.13-.85-.904-2.06-1.47-3.4-1.47-2.572 0-4.658 2.086-4.658 4.66 0 .364.042.718.12 1.06-3.873-.195-7.304-2.05-9.602-4.868-.4.69-.63 1.49-.63 2.342 0 1.616.823 3.043 2.072 3.878-.764-.025-1.482-.234-2.11-.583v.06c0 2.257 1.605 4.14 3.737 4.568-.39.106-.803.163-1.227.163-.3 0-.593-.03-.877-.084.593 1.85 2.313 3.198 4.352 3.234-1.595 1.25-3.604 1.995-5.786 1.995-.376 0-.747-.022-1.112-.065 2.062 1.323 4.51 2.093 7.14 2.093 8.57 0 13.255-7.098 13.255-13.254 0-.2-.005-.402-.014-.602.91-.658 1.7-1.477 2.323-2.41z"></path></g>
        </svg>

        <!-- Dark Mode Toggle Button -->
        <button id="dark-mode-toggle" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800">
            <!-- Icon will be set by JS on load -->
            <i data-lucide="moon" class="w-6 h-6"></i>
        </button>
    </header>

    <!-- Main Login Form Container -->
    <main class="flex-grow flex items-center justify-center">
        <div class="w-full max-w-sm p-4">
            <h1 class="text-3xl font-bold mb-6">Sign in to FakeTwitter</h1>
            
            <!-- Mock "Sign in with Google" button -->
            <button class="w-full flex items-center justify-center space-x-2 border border-gray-300 dark:border-gray-600 rounded-full py-2.5 font-semibold hover:bg-gray-50 dark:hover:bg-gray-800">
                <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path fill="#FFC107" d="M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C12.955 4 4 12.955 4 24s8.955 20 20 20s20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"></path><path fill="#FF3D00" d="M6.306 14.691l6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C16.318 4 9.656 8.337 6.306 14.691z"></path><path fill="#4CAF50" d="M24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238C29.211 35.091 26.715 36 24 36c-5.202 0-9.619-3.317-11.283-7.946l-6.522 5.025C9.505 39.556 16.227 44 24 44z"></path><path fill="#1976D2" d="M43.611 20.083H42V20H24v8h11.303c-.792 2.237-2.231 4.166-4.087 5.571l6.19 5.238C39.904 36.338 44 30.738 44 24c0-1.341-.138-2.65-.389-3.917z"></path></svg>
                <span>Sign in with Google</span>
            </button>

            <!-- Divider "or" -->
            <div class="flex items-center my-6">
                <div class="flex-grow border-t border-gray-300 dark:border-gray-600"></div>
                <span class="mx-4 text-gray-500">or</span>
                <div class="flex-grow border-t border-gray-300 dark:border-gray-600"></div>
            </div>

            <!-- Email/Password Form -->
            <form id="login-form">
                <input type="text" placeholder="Phone, email, or username" class="w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 mb-4 bg-transparent focus:border-twitter-blue focus:ring-1 focus:ring-twitter-blue">
                
                <input type="password" placeholder="Password" class="w-full border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-3 mb-4 bg-transparent focus:border-twitter-blue focus:ring-1 focus:ring-twitter-blue">

                <button type="submit" class="w-full bg-twitter-blue text-white rounded-full py-3 font-bold text-lg hover:bg-blue-500">
                    Log in
                </button>
            </form>

            <p class="text-sm text-gray-500 mt-6">
                Don't have an account? 
                <a href="#" class="text-twitter-blue hover:underline">Sign up</a>
            </p>

        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Dark Mode Logic ---
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const htmlElement = document.documentElement;

            // Function to set the icon on page load
            function setInitialIcon() {
                const icon = darkModeToggle.querySelector('i');
                if (htmlElement.classList.contains('dark')) {
                    icon.setAttribute('data-lucide', 'sun');
                } else {
                    icon.setAttribute('data-lucide', 'moon');
                }
                lucide.createIcons(); // Render the icon
            }

            // Set the icon as soon as the DOM is ready
            setInitialIcon();

            // Toggle listener
            darkModeToggle.addEventListener('click', () => {
                // FIX: The lucide.createIcons() function *replaces* the <i>
                // with an <svg>. We must remove the old <svg> and create
                // a new <i> tag to be replaced.
                
                // 1. Find the current icon (which is an <svg> tag) and remove it.
                const currentIcon = darkModeToggle.querySelector('svg');
                if (currentIcon) {
                    currentIcon.remove();
                }

                // 2. Create a new <i> element to take its place.
                const newIcon = document.createElement('i');
                newIcon.className = 'w-6 h-6'; // Re-apply the size class

                // 3. Toggle the theme and set the new icon's attribute
                if (htmlElement.classList.contains('dark')) {
                    // Turn light
                    htmlElement.classList.remove('dark');
                    localStorage.theme = 'light';
                    newIcon.setAttribute('data-lucide', 'moon');
                } else {
                    // Turn dark
                    htmlElement.classList.add('dark');
                    localStorage.theme = 'dark';
                    newIcon.setAttribute('data-lucide', 'sun');
                }
                
                // 4. Add the new <i> tag back into the button
                darkModeToggle.appendChild(newIcon);
                // 5. Tell lucide to render the new icon
                lucide.createIcons();
            });

            // --- Login Form Logic ---
            const loginForm = document.getElementById('login-form');
            loginForm.addEventListener('submit', (event) => {
                // 1. Prevent the form from *actually* submitting (which would refresh the page)
                event.preventDefault();
                
                // 2. Here you *would* check username/password
                // For this project, we'll just pretend it's successful.
                
                // 3. Redirect to the main app page!
                window.location.href = 'index.html';
            });

        });
    </script>
</body>
</html>